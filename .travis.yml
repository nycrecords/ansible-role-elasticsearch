language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: elasticsearch
  - EC2_REGION: us-east-1
  - secure: U7TWWp/NF8qn0tyr1C930uNSByQJnrtEBZZ8BEUvK1HriycaGvTVHTwEYTRFpMbfw+ZwsoTkNsN2wWVbdsAcRwYrx58Muo+Qi7Z9v06goSJX45ouGiJQ3KLrE0H8KPVgE5Ko+tWox51MOZkKoUpz8dmYYxOCKvoFwjNGXJ8BW2MY52i0c3NUzxT4PxL55cb1Dc7UeOc350jBTqODvHoYN2rcpJ4uH9K10hyXGYJc1QQNeZCl8AaDEDY2YRcbTXadkwavJ5jfmdkD9z9D43aJPrOjK+mOrY9PCU8YOnp/9JEssYnuljETt0Gk5XA1WoaIx3yTrUMF4W7UtNb/flPW+BQGX0vc6LkmflNKzJVbIpd6BxeQ8LFkjvivH55RRycrrOoHnex8gvQ9q2gaspGKOs+nS4Ld71Etnw/NRA4vs2ij3wABtg0Doo+8i+xJ4cYCbw2/X0fDnz3GuG8dxMOYjG8lf8AdLzqp9XWrkBc/gNHQzKQsY+WekAg35BqxvJQRsDRfAIsLIUFZgB+gB61kAvh8GZR+BEA2EOZdd08lIGGrMc/rzBrNuc4FlHN1/fpMYxW8GMfkeWGuNc3JdNBMrzsO9cSP2ZkB8azlfqizF1eW+mgb8pbasgP2ybuUEoer1tiyIwpefQttv0Iab1Hzb3jQnIfDnHCJSTQ/4nuQy4o=
  - secure: nca0ZW4h0/PpZI3Dbo1Z2a9bqQxe/jLbnUJAl9G2SOJ6wYuARgRAA7q1uDN6VNw+EMIXlx7KAlURu78b6MznxdfeeUV/V2LLtZtkNnUoifUXazdY6efAYYLiO0+q4wwLSybvq3qhS94vpvIg0QJdR3wfRBGRMZ0phfT+7kncvFj2ebXJYLJ0xi0JnVsE2yOUvuW+7cwrJyTlw2GivsNzKw02d07qiou6x91tolnWiQZjsOWsJy8bCUSvbvGVhOz0ggNNoGyeVTexieahHpYde1UM5MIkRcee5mTQkUvs+Yyt+SM1k3n91cnxs7mKNMHvXD7g1H2D5dn965cXEV+DQ3Oo0sfM5NQw7p7bUthHIFsM3EWzJZmbGIRttOgQ9AztMigL1bRAUuTjbmtBvIPx/l2aASgDiWbtDe0UlcozpHRqoG0tTw1WRF9E1UPwlEsD8HY6R3vpneLqbEERyZhxxKEI0FhXHycD7ws/ZNnB1OWIg8AfN8OJXUmI/2Boi2Qx0k2NyltnLhNHOVikf0ZU0O0+hhBxvtRedfcNykmqDs4hB7jl0AyiGWDHLXpJWxIfrQfeHkhr5H6HrmAGAplPCeQ5uuNPRidFiCu9RGHrPJNxq0YAJ/5rQD8yAxf+pwqrmgymOJQP4tTP6e63Dm2ZOdMQxvLa5uhx+S+2fZ76v4s=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule --debug create --scenario-name aws
- molecule --debug converge --scenario-name aws
- molecule --debug verify --scenario-name aws
- molecule --debug destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
